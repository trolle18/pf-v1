!function(p){let u={handleTabClick:function(s){var e=p(s).attr("data-tab");p(".onecom_tabs_panel").fadeOut("fast"),p(s).parent().find(".active").removeClass("active"),p(s).addClass("active"),p("#"+e).fadeIn("fast")},formSubmission:function(e){p(e).on("click",".oc-save",function(s){s.preventDefault();s=p(e).attr("id");p(this).siblings("#oc_sp_spinner").removeClass("success").addClass("is_active"),"sp-settings"==s?(p(this).val("Saving"),u.protectionForm(e,p(this))):"sp-advanced-settings"==s?(p(this).val("Saving"),u.advanceSettings(e,p(this))):"sp-diagnostics"==s?u.spamDiagnostics(e,p(this)):"sp-clear-logs"==s&&(p(this).val("Clearing"),u.spamClearlogs(e,p(this)))})},protectionForm:function(e,o){var s=document.forms["sp-protect-options"].elements,s={action:"oc_save_settings",checks:{oc_sp_accept:s.oc_sp_accept.checked,oc_sp_referrer:s.oc_sp_referrer.checked,oc_sp_long:s.oc_sp_long.checked,oc_sp_short:s.oc_sp_short.checked,oc_sp_bbcode:s.oc_sp_bbcode.checked,oc_sp_exploit:s.oc_sp_exploit.checked,oc_sp_quickres:s.oc_sp_quickres.checked,oc_max_login_val:s.oc_max_login_val.value,oc_block_time:s.oc_block_time.value,one_sp_nonce:s.one_sp_nonce.value}};p.post(ajaxurl,s,function(s){p(o).siblings("#oc_sp_spinner").removeClass("is_active"),s.success&&(p(o).siblings("#oc_sp_spinner").addClass("success"),p(e).parents().find(".notice-success").hide(),p("#oc-sp-success").fadeIn("slow"),p(e).find("input:submit").attr("disabled",!0),p(o).val("Save"),u.disableSubmit(),setTimeout(function(){p(o).siblings("#oc_sp_spinner").removeClass("success")},6e3))})},advanceSettings:function(s,e){let o=document.forms["sp-advanced-settings"].elements,t=o.oc_sp_whitelistuser.checked,c=o.oc_spbadusragent.checked,i=o.oc_sp_urlshort.checked,n=o.oc_sp_proburl.checked,a={action:"oc_save_advanced_settings",oc_sp_whitelistuser:t,oc_spbadusragent:c,oc_sp_urlshort:i,oc_sp_proburl:n,one_sp_nonce:o.one_sp_nonce.value,whitelist_usernames:""!==o.oc_whitelist_usernames.value?o.oc_whitelist_usernames.value.split("\n"):[],whitelist_agents:""!==o.oc_whitelist_useragent.value?o.oc_whitelist_useragent.value.split("\n"):[],url_shorteners:""!==o.oc_url_shorters.value?o.oc_url_shorters.value.split("\n"):[],exploit_urls:""!==o.oc_exploit_urls.value?o.oc_exploit_urls.value.split("\n"):[]};t||delete a.whitelist_usernames,c||delete a.whitelist_agents,i||delete a.url_shorteners,n||delete a.exploit_urls,u.executeAjaxRequest(s,a,e)},executeAjaxRequest:function(e,s,o){p.post(ajaxurl,s,function(s){p(o).siblings("#oc_sp_spinner").removeClass("is_active"),s.success&&(p(o).siblings("#oc_sp_spinner").addClass("success"),p(e).parents().find(".notice-success").hide(),p(e).parents().find(".advanced-settings").fadeIn("slow"),p(e).find("input:submit").attr("disabled",!0),p(o).val("Save"),u.disableSubmit(),setTimeout(function(){p(o).siblings("#oc_sp_spinner").removeClass("success")},6e3))})},spamDiagnostics:function(e,o){p(o).val("Checking");let s=document.forms["sp-diagnostics"].elements,t=p(e),c=t.parent().find(".oc-dg-err");var i=t.find(":input").filter(function(){return""===p.trim(this.value)});if(5===i.length&&0==c.length)t.parent().prepend('<div class="notice notice-error oc-dg-err"><p class="error">'+onespnotice.oc_notice+"</p></div>"),p(o).siblings("#oc_sp_spinner").removeClass("is_active"),p(o).val("Check for spam");else{if(5===i.length&&0<c.length)return p(o).siblings("#oc_sp_spinner").removeClass("is_active"),p(o).val("Check for spam"),!1;p(e).find("input:submit").attr("disabled",!0),p(e).parents().find(".oc-dg-err").remove();i={action:"oc_check_spam_diagnostics",oc_validate_ip:s.oc_validate_ip.value,oc_validate_user:s.oc_validate_user.value,oc_validate_email:s.oc_validate_email.value,oc_validate_user_agent:s.oc_validate_user_agent.value,oc_validate_content:s.oc_validate_content.value,one_sp_nonce:s.one_sp_nonce.value};p.post(ajaxurl,i,function(s){p(o).siblings("#oc_sp_spinner").removeClass("is_active"),s.success&&(p(o).siblings("#oc_sp_spinner").addClass("success"),p(e).parents().find(".ocdg-results").html(s.data),p(e).find("input:submit").attr("disabled",!1),p(e)[0].reset(),p(o).val("Check for spam"),setTimeout(function(){p(o).siblings("#oc_sp_spinner").removeClass("success")},6e3))})}},spamClearlogs:function(e,o){p(e).find("input:submit").attr("disabled",!0);var s={action:"oc_clear_spam_logs",one_sp_nonce:p(e).find(".one_sp_nonce").val()};p.post(ajaxurl,s,function(s){p(o).siblings("#oc_sp_spinner").removeClass("is_active"),s.success&&(p(e).parents().find(".notice-success").hide(),p(o).siblings("#oc_sp_spinner").addClass("success"),p(e).parents().find(".one-sp-logs").html(s.data),p(e).find("input:submit").attr("disabled",!1))})},disableSubmit:function(){var s=[p("form.sp-protect-options"),p("form.sp-blocked-lists")],s=p.map(s,function(s){return s.get()});p(s).each(function(){p(this).data("serialized",p(this).serialize())}).on("change input",function(){p(this).find("input:submit").attr("disabled",p(this).serialize()==p(this).data("serialized"))}).find("input:submit, button:submit").attr("disabled",!0)}};p(document).ready(function(){p(".onecom_tab").click(function(s){u.handleTabClick(p(this)),p(".onecom_tab.active").data("tab")}),p(".oc-duration-filter").change(function(s){var e=p(this);if(e.hasClass("disabled-section"))return!1;p(".filter-summary ul li").removeClass("active"),e.parent().hasClass("active")||e.parent().addClass("active");var e={action:"oc_get_summary",duration:p("option:selected",this).data("duration")},o=(p("span#oc_switch_spinner").css("visibility","visible"),p(".oc-summary-body").find(".oc_total_count")),t=p(".oc-summary-body").find(".oc_comment_count"),c=p(".oc-summary-body").find(".oc_registration_count"),i=p(".oc-summary-body").find(".oc_failed_login_count"),n=p(".oc-summary-body").find(".oc_other_count");p.post(ajaxurl,e,function(s){o.html(s.total_count),t.html(s.comments_count),c.html(s.registration_count),i.html(s.failed_login),n.html(s.other_count),p("#oc_switch_spinner").css("visibility","hidden")})});var s=p(".sp-blocked-lists"),e=s.find("#spbadusragent"),o=s.find("#spurlshort"),t=s.find("#spprobchk"),c=s.find("#spwhitelistusername"),i=s.find(".oc_whitelist_usernames"),n=s.find(".oc-whitelist-useragent"),a=s.find(".oc-url-shorters"),r=s.find(".oc-exploit-urls"),s=p("#spquickres"),d=p(".oc_max_login_val"),l=p(".oc_block_time"),s=(c&&!0===c.prop("checked")?i.prop("disabled",!1).css("background","#ffffff"):c&&!0!==c.prop("checked")&&i.prop("disabled",!0).css("background","#f0f0f1"),e&&!0===e.prop("checked")?n.prop("disabled",!1).css("background","#ffffff"):e&&!0!==e.prop("checked")&&n.prop("disabled",!0).css("background","#f0f0f1"),o&&!0===o.prop("checked")?a.prop("disabled",!1).css("background","#ffffff"):o&&!0!==o.prop("checked")&&a.prop("disabled",!0).css("background","#f0f0f1"),t&&!0===t.prop("checked")?r.prop("disabled",!1).css("background","#ffffff"):t&&!0!==t.prop("checked")&&r.prop("disabled",!0).css("background","#f0f0f1"),s&&!0===s.prop("checked")?(d.prop("disabled",!1).css("background","#ffffff"),l.prop("disabled",!1).css("background","#ffffff")):s&&!0!==s.prop("checked")&&(d.prop("disabled",!0).css("background","#f0f0f1"),l.prop("disabled",!0).css("background","#f0f0f1")),c.on("change",function(){var s=p(this).prop("checked");i.prop("disabled",!s),s?i.css("background","#ffffff"):i.css("background","#f0f0f1")}),e.on("change",function(){var s=p(this).prop("checked");n.prop("disabled",!s),s?n.css("background","#ffffff"):n.css("background","#f0f0f1")}),o.on("change",function(){var s=p(this).prop("checked");a.prop("disabled",!s),s?a.css("background","#ffffff"):a.css("background","#f0f0f1")}),t.on("change",function(){var s=p(this).prop("checked");r.prop("disabled",!s).css("background","#f0f0f1"),s?r.css("background","#ffffff"):r.css("background","#f0f0f1")}),p("#spquickres").on("change",function(){var s=p(this).prop("checked");d.prop("disabled",!s).css("background","#f0f0f1"),l.prop("disabled",!s).css("background","#f0f0f1"),s?(d.css("background","#ffffff"),l.css("background","#ffffff")):(d.css("background","#f0f0f1"),l.css("background","#f0f0f1"))}),p(".oc-show-modal").on("click",function(s){s.preventDefault();jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"show_plugin_dependent_popup",popupContent:{title:"Get Spam Protection plugin with \n Managed WordPress","top-desc":"Spend less time worrying about your siteâ€™s safety and more time growing your business with one.com Managed WordPress.","footer-desc":"Managed WordPress includes other great features such as Vulnerability Monitor and Upgrade Manager",bodylist:["Protects the website from spam comments, spam registration, spambots, and other spammers. ","Customizable protection settings, spam logs, and other options."]}},success:function(s){void 0!==s.success&&!0===s.success&&(p("#oc_um_overlay").html(s.data),s=location.search,p("#oc_um_overlay").show(),ocSetModalData({isPremium:!0,feature:"spam_protection",featureAction:"getStarted",referrer:s}))},error:function(s,e,o){}})}),document.getElementsByClassName("disabled-section"));if(0===s.length){let s=new IntersectionObserver(function(s){!0===s[0].isIntersecting?(p(".oc-sp-float-btn").hide(),p(".float-spinner").removeClass("success").hide()):(p(".oc-sp-float-btn").show(),p(".float-spinner").show())},{threshold:[0]});s.observe(document.querySelector("#onecom-sp-ui #settings .oc-save")),s.observe(document.querySelector("#onecom-sp-ui #advanced_settings .oc-save"))}c=p("#onecom-sp-ui").find("form.sp-protect-options"),e=p("#onecom-sp-ui").find("form.sp-blocked-lists"),o=p("#onecom-sp-ui").find("form.sp-diagnostics"),t=p("#onecom-sp-ui").find("form#sp-clear-logs");u.formSubmission(c),u.formSubmission(e),u.formSubmission(o),u.formSubmission(t),u.disableSubmit()})}(jQuery);